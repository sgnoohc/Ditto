#!/bin/bash

if [ -d "$HOME/login" ]; then
  echo "LOGINEXISTS"
  LOGINEXISTS=true;
  source ~/login/bash/utils.sh
fi


DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

usage()
{
  echo "Usage:"
  echo ""
  echo "  $0 UPDATEMESSAGE"
  echo ""
  echo ""
  exit
}

if [ -z $1 ]; then usage; fi

ditto_setup_check

cd $DITTOPATH
if [ "$LOGINEXISTS" = true ]; then
  e_note "Ditto:: Committing changes ..."
else
  echo "Ditto:: Committing changes ..."
fi
git commit -a -m "$1"
if [ "$LOGINEXISTS" = true ]; then
  e_note "Ditto:: Pulling changes from the master ... "
else
  echo "Ditto:: Pulling changes from the master ... "
fi
git pull --rebase
if [ "$LOGINEXISTS" = true ]; then
  e_note "Ditto:: Pushing changes to the master ... "
else
  echo "Ditto:: Pushing changes to the master ... "
fi
git push --quiet
#git status

#cd $PACKAGEPATH
#git commit -a -m "$1"
#git push
#git status
